map.libs=function(ifn.table, label)
{
    cat(sprintf("mapping libs for id: %s\n", label))
    table = load.table(ifn.table)
    cat(sprintf("number of libs: %d\n", dim(table)[1]))
    for (id in table$run.id) {
        command = sprintf("make m=map map LIB_ID=%s", id)
        cat(sprintf("running command: %s\n", command))
        if (system(command) != 0)
            stop("error in map command")
    }
}

vari.libs=function(ifn.table, label)
{
    cat(sprintf("computing variation profiles for id: %s\n", label))
    table = load.table(ifn.table)
    cat(sprintf("number of libs: %d\n", dim(table)[1]))
    for (id in table$run.id) {
        command = sprintf("make m=vari vari_cag LIB_ID=%s", id)
        cat(sprintf("running command: %s\n", command))
        if (system(command) != 0)
            stop("error in map command")
    }
}

plot.detailed.libs=function(ifn.table, label)
{
    cat(sprintf("plotting id: %s\n", label))
    table = load.table(ifn.table)
    cat(sprintf("number of libs: %d\n", dim(table)[1]))
    for (id in table$run.id) {
        command = sprintf("make m=vari plot_vari LIB_ID=%s", id)
        cat(sprintf("running command: %s\n", command))
        if (system(command) != 0)
            stop("error in map command")
    }
}
